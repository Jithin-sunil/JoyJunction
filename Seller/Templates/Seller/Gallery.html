<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
</head>

<body>
    <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <table border="1" align="center" cellpadding="10">
            <tr>
                <td>Select Image</td>
                <td>
                    <input type="file" name="file_photo" id="file_photo" accept="image/*" multiple>
                    <!-- <div id="preview" style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;"></div> -->
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <input type="submit" value="Upload Image">
                </td>
            </tr>
        </table>
    </form>

    <br>
    <h3 align="center">Manage Gallery</h3>
    <table border="1" align="center" cellpadding="10">
        <tr>
            <th>SNO</th>
            <th> Image</th>
            <th>Action</th>
        </tr>
        {% for i in galleryphotos %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><img src="{{ i.gallery_photo.url }}" width="100" height="100"></td>
            <td>
                <a href="{% url 'Seller:delgallery' i.id pid %}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <!-- <script>
        const input = document.getElementById('file_photo');
        const preview = document.getElementById('preview');
        if (input) {
            input.addEventListener('change', () => {
                preview.innerHTML = '';
                Array.from(input.files).forEach(file => {
                    if (!file.type.startsWith('image/')) return;
                    const img = document.createElement('img');
                    img.src = URL.createObjectURL(file);
                    img.style.width = '80px';
                    img.style.height = '80px';
                    img.style.objectFit = 'cover';
                    img.style.border = '1px solid #ccc';
                    preview.appendChild(img);
                });
            });
        }
    </script> -->
</body>

</html>
{% if msg %}
<script>
    alert("{{ msg }}");
    window.location = "{% url 'Seller:Gallery' pid %}";
</script>
{% endif %}